<div class="row">
  <div class="col-lg-10 mx-auto">
    <!-- 戻るリンク -->
    <div class="mb-3">
      <%= link_to communities_path, class: "text-decoration-none" do %>
        <i class="bi bi-arrow-left"></i> コミュニティ一覧に戻る
      <% end %>
    </div>

    <!-- コミュニティ情報 -->
    <%= render 'communities/show/community_info', 
               community: @community, 
               can_moderate: @can_moderate, 
               is_member: @is_member, 
               is_pending: @is_pending %>

    <!-- 管理機能（管理者・モデレーターのみ表示） -->
    <% if @can_moderate %>
      <%= render 'communities/moderation/moderation_section', 
                 community: @community, 
                 pending_memberships: @pending_memberships, 
                 is_admin: @is_admin %>
    <% end %>

    <!-- 承認待ちメッセージ -->
    <% if @is_pending %>
      <%= render 'communities/show/pending_message' %>
    <% end %>

    <!-- コミュニティ投稿（2ちゃんねる風掲示板） -->
    <% if @is_member %>
      <!-- 新規スレッド投稿フォーム -->
      <%= render 'communities/show/new_thread_form', community: @community %>

      <!-- スレッド一覧 -->
      <%= render 'communities/show/threads_section', 
                 threads: @threads, 
                 community: @community, 
                 can_moderate: @can_moderate, 
                 current_user: current_user %>
    <% elsif !@is_pending %>
      <%= render 'communities/show/non_member_message', community: @community %>
    <% end %>
  </div>
</div>
