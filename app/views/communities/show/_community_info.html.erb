<div class="card shadow-sm mb-4">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-start mb-3">
      <div class="flex-grow-1">
        <h1 class="h2 mb-2"><%= community.name %></h1>
        <% unless community.public? %>
          <span class="badge bg-secondary mb-2">
            <i class="bi bi-lock"></i> 非公開コミュニティ
          </span>
        <% end %>
        <p class="text-muted mb-3"><%= simple_format(community.description) %></p>
        <div class="mb-3">
          <div class="d-flex align-items-center gap-2 flex-wrap mb-2">
            <span class="badge bg-info">
              <i class="bi bi-chat-dots"></i> <%= community.threads_count %>スレッド
            </span>
            <span class="badge bg-success">
              <i class="bi bi-chat"></i> <%= community.replies_count %>レス
            </span>
            <span class="badge bg-<%= case community.activity_level
                                      when 'very_high' then 'danger'
                                      when 'high' then 'warning'
                                      when 'medium' then 'info'
                                      else 'secondary'
                                      end %>">
              <i class="bi bi-fire"></i> 活発度: <%= community.activity_score %>
            </span>
          </div>
          <div class="d-flex align-items-center gap-3 text-muted flex-wrap">
            <small>
              <i class="bi bi-person"></i> メンバー: <%= community.members_count %>人
            </small>
            <small>
              <i class="bi bi-person-circle"></i> 作成者: <%= community.creator.name %>
            </small>
            <% if can_moderate %>
              <small>
                <i class="bi bi-shield-check"></i> モデレーター権限あり
              </small>
            <% end %>
          </div>
        </div>
      </div>
      <div>
        <%= render 'communities/show/membership_button', 
                   community: community, 
                   is_member: is_member, 
                   is_pending: is_pending %>
      </div>
    </div>
  </div>
</div>
