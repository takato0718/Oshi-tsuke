<div class="card-body border-bottom reply-item" data-reply-id="<%= reply.id %>">
  <div class="d-flex align-items-start">
    <div class="flex-grow-1">
      <div class="d-flex align-items-center mb-2">
        <%= link_to user_path(reply.user), class: "user-link d-flex align-items-center text-decoration-none text-muted me-3" do %>
          <%= user_avatar_tag(reply.user, size: 20, class: "me-2") %>
          <strong class="text-dark"><%= reply.user.name %></strong>
        <% end %>
        <small class="text-muted">
          <i class="bi bi-clock"></i> <%= reply.created_at.strftime("%Y年%m月%d日 %H:%M") %>
        </small>
        <div class="ms-auto d-flex gap-2">
          <% if defined?(can_moderate) && can_moderate && reply.can_be_deleted_by?(current_user) %>
            <%= button_to destroy_reply_community_moderations_path(@community, reply_id: reply.id), 
                          method: :delete, 
                          data: { turbo_confirm: "本当にこのレスを削除しますか?" }, 
                          class: "btn btn-sm btn-outline-danger" do %>
              <i class="bi bi-trash"></i>
            <% end %>
          <% end %>
          <% if defined?(current_user) && logged_in? && reply.user != current_user %>
            <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#reportModal<%= reply.id %>">
              <i class="bi bi-flag"></i>
            </button>
          <% end %>
        </div>
      </div>
      <div class="reply-content">
        <%= simple_format(reply.description) %>
      </div>
    </div>
  </div>
</div>
