<div class="row">
  <div class="col-lg-8 mx-auto">
    <div class="text-center mb-4">
      <h1 class="h2 mb-2">
        <i class="bi bi-stars text-warning"></i> 今日の推し紹介
      </h1>
      <p class="text-muted">
        今日も新しい推しとの出会いが待っています
      </p>
    </div>

    <% if @recommendation.nil? || @post.nil? %>
      <div class="card shadow-sm">
        <div class="card-body text-center py-5">
          <i class="bi bi-check-circle-fill display-1 text-success"></i>
          <h3 class="h5 mt-3">今日の推し紹介は終了しました</h3>
          <p class="text-muted mb-4">明日また来てね！</p>
          <%= link_to posts_path, class: "btn btn-primary" do %>
            <i class="bi bi-grid-3x3-gap"></i> 投稿一覧を見る
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="card shadow-lg border-0">
        <div class="card-body p-4">
          <div class="text-center mb-4">
            <span class="badge bg-warning text-dark mb-3">
              <i class="bi bi-star-fill"></i> 今日の推し
            </span>
          </div>

          <% if (image_html = post_image_tag(@post, placeholder_height: "400px", html_options: { class: "card-img-top rounded mb-4", style: "max-height: 400px; object-fit: cover;" })) %>
            <%= image_html %>
          <% end %>

          <h2 class="card-title h3 text-center mb-3"><%= @post.title %></h2>
          
          <div class="text-center text-muted mb-4">
            <i class="bi bi-person"></i> 投稿者: <%= @post.user.name %>
          </div>

          <div class="card-text mb-4">
            <p class="lead text-center"><%= simple_format(@post.description) %></p>
          </div>

          <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
            <%= button_to skip_recommendation_path(@recommendation), method: :patch,
                          onclick: "return confirm('本当にスキップしますか？')",
                          class: "btn btn-outline-secondary btn-sm" do %>
              <i class="bi bi-skip-forward"></i> スキップ
            <% end %>
            <%= button_to like_recommendation_path(@recommendation), method: :patch, class: "btn btn-primary btn-lg" do %>
              <i class="bi bi-heart-fill"></i> この推しに興味あり
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
